<plugin resizable="true">
	<vbox spacing="4">
		<!-- Area selector -->
		<align halign="-1" fill="true">
			<hbox padding.left="6" padding.right="6" padding.top="4" padding.bottom="4" spacing="8" fill="false" bg.color="bg_schema">
				<label text="labels.working_area"/>
				<combo id="asel" halign="1"/>
			</hbox>
		</align>

		<!-- Trigger -->
		<hbox visibility=":asel ieq 0" expand="true" spacing="4">
			<vbox spacing="4" expand="true">
				<!-- Trigger Graph -->
				<group ui:inject="GraphGroup" ipadding="0" text="labels.graphs.trigger" expand="true">
					<graph width.min="640" height.min="256" expand="true" fill="true">
						<origin hpos="1" vpos="-1" visible="false"/>
						<!-- Gray grid -->
						<ui:for id="t" first="0" last="4" step="1">
							<ui:attributes ox="0" oy="1">
								<marker v="${t}.25" color="graph_alt_2"/>
								<marker v="${t}.5" color="graph_alt_1"/>
								<marker v="${t}.75" color="graph_alt_2"/>
							</ui:attributes>
						</ui:for>

						<ui:attributes ox="1" oy="0" color="graph_alt_1">
							<marker v="+12 db"/>
							<marker v="-12 db"/>
							<marker v="-36 db"/>
							<marker v="-60 db"/>
						</ui:attributes>

						<!-- Yellow grid -->
						<ui:for id="t" first="1" last="4" step="1">
							<marker v="${t}" ox="0" oy="1" color="graph_sec"/>
						</ui:for>

						<ui:attributes ox="1" oy="0" color="graph_sec">
							<marker v="0 db"/>
							<marker v="-24 db"/>
							<marker v="-48 db"/>
						</ui:attributes>

						<!-- Meshes -->
						<mesh id="isgl" width="2" color="left_channel" color.a="0.2" visibility=":isvl"/>
						<mesh id="isgr" width="2" color="right_channel" color.a="0.2" visibility=":isvr"/>
						<mesh id="tlg" width="2" color="blue" color.a="0.2" visibility=":tlv"/>
						<mesh id="tfg" width="2" color="orange" color.a="0.2" visibility=":tfv"/>

						<!-- Boundaries -->
						<marker v="24 db" ox="1" oy="0" color="graph_prim" visible="false"/>
						<marker v="5" ox="0" oy="1" color="graph_prim" visible="false"/>

						<!-- Axis -->
						<axis min="0" max="5" angle="1.0" log="false" color="graph_prim" visible="false"/>
						<axis min="-72 db" max="24 db" angle="0.5" log="true" color="graph_prim" visible="false"/>

						<!-- Text -->
						<text x="5" y="-72 db" text="graph.units.s" halign="1" valign="1" color="graph_prim"/>
						<ui:for id="t" first="0" last="4" step="1">
							<text x="${t}" y="-72 db" text="${t}" halign="-1" valign="1" color="graph_prim"/>
							<text x="${t}.5" y="-72 db" text="${t}.5" halign="-1" valign="1" color="graph_prim"/>
						</ui:for>
						<ui:attributes x="5" halign="1" valign="1" color="graph_prim">
							<text y="12 db" text="+12"/>
							<text y="0 db" text="0"/>
							<text y="-12 db" text="-12"/>
							<text y="-24 db" text="-24"/>
							<text y="-36 db" text="-36"/>
							<text y="-48 db" text="-48"/>
							<text y="-60 db" text="-60"/>
							<text x="5" y="24 db" text="graph.units.db" valign="-1"/>
						</ui:attributes>

						<!-- Markers -->
						<ui:attributes ox="1" oy="0">
							<marker id="dtr1" color="#0080ff"/>
							<marker id="dtr2" color="#0080ff"/>
							<marker id="dl" color="#ff0000"/>
							<marker id="rl" color="#ff0000"/>
						</ui:attributes>
					</graph>
				</group>
				<!-- Down panel -->
				<hbox padding.left="6" padding.right="6" padding.top="4" padding.bottom="4" bg.color="bg_schema">
					<!-- MIDI settings -->
					<align halign="-1" fill="true">
						<hbox spacing="8" visibility="ex :note">
							<label text="labels.channel"/>
							<combo id="chan" fill="true" width="20"/>
							<label text="labels.mus.note"/>
							<combo id="note" width="20"/>
							<label text="labels.mus.octave"/>
							<combo id="oct" width="20"/>
							<label text="labels.midi.midi_num"/>
							<midinote id="mn" note_id="note" octave_id="oct" text.color="green"/>
						</hbox>
					</align>
					<align halign="1" fill="true">
						<hbox spacing="8">
							<button id="pause" text="labels.pause" size="16" ui:inject="Button_green" led="true"/>
							<button id="clear" text="labels.clear" size="16" ui:inject="Button_red" led="true"/>
						</hbox>
					</align>
				</hbox>
			</vbox>

			<!-- Input signal meters -->
			<grid rows="3" cols="3" hfill="false" hspacing="4">
				<ui:attributes bg.color="bg_schema">
					<label text="labels.chan.in" padding="4"/>
					<label text="labels.sc.SC" padding="4"/>
					<label text="labels.Tri_gger" padding="4"/>

					<grid rows="2" cols="2" fill="false" hspacing="2">
						<button id="isvl" size="10" ui:inject="Button_left" led="true"/>
						<button id="isvr" size="10" ui:inject="Button_right" led="true"/>
					</grid>

					<button id="tfv" height="10" width="22" ui:inject="Button_green" led="true"/>
					<button id="tlv" height="10" width="22" ui:inject="Button_green" led="true"/>
				</ui:attributes>

				<ledmeter vexpand="true" height.min="256" angle="1">
					<ledchannel id="isml" min="-72 db" max="24 db" log="true" type="rms_peak" peak.visibility="true" activity=":isvl" value.color="left_channel"/>
					<ledchannel id="ismr" min="-72 db" max="24 db" log="true" type="rms_peak" peak.visibility="true" activity=":isvr" value.color="right_channel"/>
				</ledmeter>

				<!-- Sidechain signal meter -->

				<ledmeter vexpand="true" height.min="256" angle="1">
					<ledchannel id="tfm" min="-72 db" max="24 db" log="true" activity=":tfv" value.color="orange"/>
				</ledmeter>

				<!-- Trigger signal meter -->

				<ledmeter vexpand="true" height.min="256" angle="1">
					<ledchannel id="tlm" min="-72 db" max="24 db" log="true" activity=":tlv" value.color="blue"/>
				</ledmeter>

			</grid>
		</hbox>

		<!-- Instrument editor -->
		<hbox visibility=":asel ieq 1" spacing="4" expand="true">
			<cgroup id="ssel" expand="true" active="0">
				<vbox>
					<!-- File editor -->
					<asample
						expand="true"
						id="sf[ssel]"
						mesh_id="fd[ssel]"
						path_id="_ui_dlg_sample_path"
						hcut=":hc[ssel]"
						tcut=":tc[ssel]"
						fadein=":fi[ssel]"
						fadeout=":fo[ssel]"
						length=":fl[ssel]"
						status=":fs[ssel]"
						width.min="320"
						height.min="160"
						clipboard.head_cut="hc[ssel]"
						clipboard.tail_cut="tc[ssel]"
						clipboard.fade_in="fi[ssel]"
						clipboard.fade_out="fo[ssel]"
						clipboard.makeup="mk[ssel]"
						clipboard.predelay="pd[ssel]"/>

					<grid rows="3" cols="15" bg.color="bg" hspacing="2">
						<label text="labels.sedit.reverse" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.head_cut" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.tail_cut" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.fade_in" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.fade_out" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.makeup" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.predelay" bg.color="bg_schema" padding="6"/>
						<cell rows="3">
							<vsep bg.color="bg"/>
						</cell>
						<label text="labels.sedit.listen" bg.color="bg_schema" padding="6"/>

						<cell rows="2">
							<vbox bg.color="bg_schema">
								<button id="rs[ssel]" size="32"/>
								<label padding.bottom="6"/>
								<label padding.bottom="6"/>
							</vbox>
						</cell>
						<knob id="hc[ssel]" size="20" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="tc[ssel]" size="20" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="fi[ssel]" size="20" scale.color="fade_in" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="fo[ssel]" size="20" scale.color="fade_out" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="mk[ssel]" size="20" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="pd[ssel]" size="20" bg.color="bg_schema" padding.bottom="6"/>
						<cell rows="2">
							<vbox bg.color="bg_schema">
								<button id="ls[ssel]" size="32" ui:inject="Button_cyan" toggle="false"/>
								<label padding.bottom="6"/>
								<label padding.bottom="6"/>
							</vbox>
						</cell>
						<value id="hc[ssel]" bg.color="bg_schema" padding.bottom="6"/>
						<value id="tc[ssel]" bg.color="bg_schema" padding.bottom="6"/>
						<value id="fi[ssel]" bg.color="bg_schema" padding.bottom="6"/>
						<value id="fo[ssel]" bg.color="bg_schema" padding.bottom="6"/>
						<value id="mk[ssel]" bg.color="bg_schema" padding.bottom="6"/>
						<value id="pd[ssel]" bg.color="bg_schema" padding.bottom="6"/>

					</grid>
				</vbox>
			</cgroup>
			<group text="groups.sample_matrix" expand="true" ipadding="0">
				<!-- Sample matrix -->
				<grid rows="9" cols="17" transpose="true" hspacing="2" bg.color="bg">
					<label text="labels.sedit.sample_num" fill="true" halign="0" bg.color="bg_schema" padding="6"/>
					<label text="labels.sedit.enabled" fill="true" halign="0" bg.color="bg_schema"/>
					<label text="labels.midi.velocity" fill="true" halign="0" bg.color="bg_schema"/>
					<label text="labels.units.:pc" fill="true" halign="0" bg.color="bg_schema" padding.bottom="6"/>
					<label text="labels.signal.pan_left" fill="true" halign="0" bg.color="bg_schema"/>
					<label text="labels.units.:pc" fill="true" halign="0" bg.color="bg_schema" padding.bottom="6"/>
					<label text="labels.signal.pan_right" fill="true" halign="0" bg.color="bg_schema"/>
					<label text="labels.units.:pc" fill="true" halign="0" bg.color="bg_schema" padding.bottom="6"/>
					<label text="labels.sedit.listen" fill="true" halign="0" bg.color="bg_schema"/>
					<cell rows="9">
						<vsep/>
					</cell>

					<ui:for id="i" first="0" last="7">
						<label text="${i}" bg.color="bg_schema"/>
						<button id="on_${i}" width="32" height="12" ui:inject="Button_yellow" led="true" bg.color="bg_schema" padding="6"/>
						<knob id="vl_${i}" size="20" scale.color="velocity" bg.color="bg_schema"/>
						<value id="vl_${i}" detailed="false" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="pl_${i}" size="20" balance="0.5" scale.color="left_channel" bg.color="bg_schema"/>
						<value id="pl_${i}" detailed="false" bg.color="bg_schema" padding.bottom="6"/>
						<knob id="pr_${i}" size="20" balance="0.5" scale.color="right_channel" bg.color="bg_schema"/>
						<value id="pr_${i}" detailed="false" bg.color="bg_schema" padding.bottom="6"/>
						<button id="ls_${i}" size="32" ui:inject="Button_cyan" toggle="false" bg.color="bg_schema" padding.bottom="6"/>
						<cell rows="9">
							<vsep/>
						</cell>
					</ui:for>
				</grid>
			</group>
		</hbox>

		<!-- Common parameters -->
		<hbox spacing="4">
			<!-- Controls -->
			<group text="groups.plug.trigger" expand="true" ipadding="0">
				<!-- Trigger -->
				<grid rows="4" cols="13" expand="true" transpose="true" hspacing="2" bg.color="bg">

					<cell rows="4">
						<grid rows="2" cols="1" bg.color="bg" vspacing="4">
							<vbox padding="6" bg.color="bg_schema">
								<label text="labels.mode"/>
								<combo id="mode" fill="true"/>
							</vbox>
							<vbox padding="6" bg.color="bg_schema">
								<label text="labels.source"/>
								<combo id="ssrc" fill="true"/>
							</vbox>
						</grid>
					</cell>

					<cell rows="4"><vsep/></cell>

					<cell rows="4">
						<grid rows="4" cols="3" transpose="true" bg.color="bg" hspacing="2">
							<label text="labels.sc.preamp" padding="6" bg.color="bg_schema" width.min="49"/>
							<knob id="preamp" bg.color="bg_schema" padding.bottom="4"/>
							<value id="preamp" bg.color="bg_schema" padding.bottom="4"/>
							<cell cols="3">
								<hbox padding.top="4" bg.color="bg">
									<label bg.color="bg_schema" expand="true"/>
									<label text="labels.active" bg.color="bg_schema" padding="6"/>
									<led id="tla" bg.color="bg_schema" size="8" padding="6"/>
									<label bg.color="bg_schema" expand="true"/>
								</hbox>
							</cell>
							<cell rows="3"><vsep/></cell>
							<label text="labels.sc.reactivity" padding="6" bg.color="bg_schema"/>
							<knob id="react" bg.color="bg_schema"/>
							<value id="react" bg.color="bg_schema"/>
						</grid>
					</cell>

					<cell rows="4"><vsep/></cell>

					<label text="labels.flt.HPF" padding="6" bg.color="bg_schema"/>
					<combo id="shpm" bg.color="bg_schema" padding.left="6" padding.right="6"/>
					<knob id="shpf" size="20" bright="(:shpm igt 0) ? 1 : 0.5" bg.color="bg_schema"/>
					<value id="shpf" bright="(:shpm igt 0) ? 1 : 0.5" bg.color="bg_schema" width.min="30"/>

					<cell rows="4"><vsep/></cell>

					<label text="labels.flt.LPF" padding="6" bg.color="bg_schema"/>
					<combo id="slpm" bg.color="bg_schema" padding.left="6" padding.right="6"/>
					<knob id="slpf" size="20" bright="(:slpm igt 0) ? 1 : 0.5" bg.color="bg_schema"/>
					<value id="slpf" bright="(:slpm igt 0) ? 1 : 0.5" bg.color="bg_schema" width.min="30"/>

					<cell rows="4"><vsep/></cell>

					<cell rows="4" bg.color="bg_schema">
						<grid rows="4" cols="2" transpose="true">
							<ui:attributes padding="6">
								<cell cols="2"><label text="labels.attack"/></cell>
								<label text="labels.thresh_old"/>
								<knob id="dl" scale.color="magenta" size="20"/>
								<value id="dl" width.min="31"/>
								<label text="labels.time"/>
								<knob id="dt" size="20"/>
								<value id="dt" width.min="31"/>
							</ui:attributes>
						</grid>
					</cell>

					<cell rows="4"><vsep/></cell>

					<cell rows="4" bg.color="bg_schema">
						<grid rows="4" cols="2" transpose="true">
							<ui:attributes padding="6">
								<cell cols="2"><label text="labels.release"/></cell>
								<label text="labels.thresh_old"/>
								<knob id="rrl" scale.color="magenta" size="20"/>
								<value id="rrl" width.min="31"/>
								<label text="labels.time"/>
								<knob id="rt" size="20"/>
								<value id="rt" width.min="31"/>
							</ui:attributes>
						</grid>
					</cell>

					<cell rows="4"><vsep/></cell>

					<cell rows="4" bg.color="bg_schema">
						<grid rows="4" cols="3" transpose="true">
							<ui:attributes padding="6">
								<cell cols="3"><label text="labels.dynamics"/></cell>
								<label text="labels.spread"/>
								<knob id="dyna" scale.color="#0080ff" size="20"/>
								<value id="dyna" width.min="35"/>
								<label text="labels.range_id" text:id="1"/>
								<knob id="dtr1" scale.color="#0080ff" size="20"/>
								<value id="dtr1" width.min="35"/>
								<label text="labels.range_id" text:id="2"/>
								<knob id="dtr2" scale_color="#0080ff" size="20"/>
								<value id="dtr2" width.min="35"/>
							</ui:attributes>
						</grid>
					</cell>
				</grid>
			</group>

			<group text="groups.audio_channel" ipadding="0">
				<grid rows="3" cols="3">
					<ui:attributes padding="6">
						<label text="labels.signal.dry"/>
						<label text="labels.signal.wet"/>
						<label text="labels.output"/>

						<knob id="dry"/>
						<knob id="wet"/>
						<knob id="g_out"/>

						<value id="dry"/>
						<value id="wet"/>
						<value id="g_out"/>
					</ui:attributes>
				</grid>
			</group>
		</hbox>
	</vbox>
</plugin>
